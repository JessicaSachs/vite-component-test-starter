<html>
<head>
  <meta charset="utf-8">
  <title>☕️ Mocha Tests</title>
  <link href="https://unpkg.com/mocha@4.0.1/mocha.css" rel="stylesheet"/>
  <script src="https://unpkg.com/chai@4.1.2/chai.js"></script>
  <script src="https://unpkg.com/mocha@4.0.1/mocha.js"></script>
  <script>
    mocha.setup('bdd');
    window.expect = chai.expect
  </script>
  <div id="mocha"></div>
</head>

<body>
<script type="module">
  delete window.__VUE_DEVTOOLS_TOAST__
  import('./helpers').then(async ({specs}) => {
    const specImports = await specs
    Promise.all(specImports).then(() => {
      mocha.setup({reporter: 'html'})
      mocha.checkLeaks()
      mocha.run()
    }).catch((err) => {
      console.error(err)
      document.body.innerHTML = `${err}
        <p><button onclick="goToTest()">Go to test/index.html</button></p>
        `
      window.goToTest = () => document.location.href = '/test/index.html'
    })
  })
</script>
</body>
</html>
